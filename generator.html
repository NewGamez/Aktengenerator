<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>NCPD Aktengenerator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Inter", system-ui, sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #252542 0, #050511 55%, #050509 100%);
      color: #fff;
      display: flex;
      flex-direction: column;
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 20px;
      background: rgba(5, 6, 20, 0.92);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .topbar-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .hero-logo {
      width: 36px;
      height: 36px;
      object-fit: cover;
      border-radius: 50%;
      display: block;
      margin-right: 8px;
      opacity: 0.95;
    }
    
    .topbar-title-main {
      font-size: 1rem;
      font-weight: 600;
    }

    .topbar-title-sub {
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .logout-btn {
      font-size: 0.8rem;
      text-decoration: none;
      color: #d5d7ff;
      padding: 6px 14px;
      border-radius: 30px;
      border: 1px solid rgba(213, 215, 255, 0.25);
      background: rgba(20, 22, 40, 0.8);
      transition: 0.2s;
    }

    .logout-btn:hover {
      background: rgba(35, 38, 70, 0.95);
    }

    .page {
      flex: 1;
      width: 100%;
      max-width: 1700px;
      margin: 20px auto;
      padding: 0 20px 30px;
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.4fr);
      gap: 18px;
    }

    @media (max-width: 1100px) {
      .page {
        grid-template-columns: 1fr;
      }
    }

    .panel {
      background: rgba(10, 12, 25, 0.8);
      padding: 18px 18px 20px;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 12px;
    }

    .panel-title {
      font-size: 0.95rem;
      font-weight: 600;
    }

    .panel-subtitle {
      font-size: 0.75rem;
      opacity: 0.7;
    }

    label {
      display: block;
      margin: 8px 0 3px;
      font-size: 0.8rem;
      opacity: 0.9;
    }

    input, textarea, select {
      width: 100%;
      background: #0f1122;
      border: 1px solid #2c2e40;
      color: #fff;
      padding: 8px 9px;
      border-radius: 7px;
      font-size: 0.82rem;
      outline: none;
      transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    input:focus, textarea:focus, select:focus {
      border-color: #5865f2;
      box-shadow: 0 0 0 1px rgba(88, 101, 242, 0.45);
      background: #10132a;
    }

    textarea {
      min-height: 110px;
      resize: vertical;
    }

    .row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    @media (max-width: 700px) {
      .row {
        grid-template-columns: 1fr;
      }
    }

    .checkbox-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px 12px;
      margin: 4px 0 8px;
      font-size: 0.78rem;
    }

    .checkbox-row label {
      margin: 0;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .checkbox-row input[type="checkbox"] {
      width: 14px;
      height: 14px;
      border-radius: 4px;
      cursor: pointer;
      padding: 0;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      border-radius: 8px;
      padding: 9px 14px;
      border: none;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 500;
      margin-top: 12px;
      background: #5865f2;
      color: #fff;
      box-shadow: 0 8px 20px rgba(88,101,242,0.45);
      transition: transform 0.06s ease, box-shadow 0.06s ease, background 0.15s ease;
    }

    .btn:hover {
      background: #6a74ff;
      transform: translateY(-1px);
      box-shadow: 0 11px 26px rgba(88,101,242,0.55);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 7px 16px rgba(88,101,242,0.5);
    }

    .btn-secondary {
      background: #1e213b;
      box-shadow: none;
      border: 1px solid rgba(255,255,255,0.08);
      margin-left: 6px;
    }

    .btn-secondary:hover {
      background: #272b4b;
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }

    .tab-buttons {
      display: inline-flex;
      gap: 6px;
      background: #080a19;
      padding: 3px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.06);
      margin-bottom: 14px;
    }

    .tab-btn {
      border-radius: 999px;
      border: none;
      padding: 4px 10px;
      font-size: 0.78rem;
      cursor: pointer;
      background: transparent;
      color: #a4a7d7;
      transition: 0.15s;
    }

    .tab-btn.active {
      background: #5865f2;
      color: #fff;
      box-shadow: 0 6px 15px rgba(88,101,242,0.5);
    }

    .tab-btn:not(.active):hover {
      background: rgba(255,255,255,0.04);
    }

    .hidden {
      display: none;
    }

    #output {
      width: 100%;
      min-height: 380px;
      background: #050614;
      border-radius: 10px;
      border: 1px solid #282a3e;
      padding: 10px 12px;
      color: #f9f9ff;
      font-family: "Consolas", "Fira Code", monospace;
      font-size: 0.8rem;
      white-space: pre-wrap;
      resize: vertical;
    }

    .section-title {
      font-size: 0.8rem;
      font-weight: 600;
      margin-top: 10px;
      margin-bottom: 4px;
      opacity: 0.9;
    }

    .link-list a {
      display: inline-block;
      font-size: 0.78rem;
      margin: 2px 6px 4px 0;
      color: #a8b0ff;
      text-decoration: none;
      padding: 4px 7px;
      border-radius: 999px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.06);
    }

    .link-list a:hover {
      background: rgba(88,101,242,0.3);
      border-color: rgba(88,101,242,0.8);
    }
  </style>
</head>
<body>

  <header class="topbar">
    <div class="topbar-left">
      <img src="ncpd-logo.png" class="hero-logo" alt="NCPD Logo">
      <div>
        <div class="topbar-title-main">NCPD Aktengenerator</div>
        <div class="topbar-title-sub">Aktengenerator • NCPD II</div>
      </div>
    </div>

    <a class="logout-btn" href="index.html">Logout</a>
  </header>

  <main class="page">

    <section class="panel">
      <div class="panel-header">
        <div>
          <div class="panel-title">NCPD II Übersicht</div>
          <div class="panel-subtitle">Strafakte • Schnellakte • Kollektivakte</div>
        </div>
      </div>

      <div class="tab-buttons">
        <button class="tab-btn active" data-tab="strafakte">Strafakte</button>
        <button class="tab-btn" data-tab="schnellakte">Schnellakte</button>
        <button class="tab-btn" data-tab="kollektivakte">Kollektivakte</button>
      </div>

      <!-- STRAFAKTE -->
      <div id="tab-strafakte">
        <div class="row">
          <div>
            <label for="st-officer">Officer</label>
            <input id="st-officer" type="text" />
          </div>
          <div>
            <label for="st-tatort">Tatort und Tatzeit</label>
            <input id="st-tatort" type="text" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="st-beschuldigte">Beschuldigte Personen</label>
            <textarea id="st-beschuldigte"></textarea>
          </div>
          <div>
            <label for="st-geschaedigte">Geschädigte Personen</label>
            <textarea id="st-geschaedigte"></textarea>
          </div>
        </div>

        <label for="st-sachverhalt">Sachverhalt aus Sicht des NCPDs</label>
        <textarea id="st-sachverhalt"></textarea>

        <label>Identitätsfeststellung</label>
        <div class="checkbox-row">
          <label><input type="checkbox" id="st-id-pers" /> Personalausweis</label>
          <label><input type="checkbox" id="st-id-waffe" /> Waffenschein</label>
          <label><input type="checkbox" id="st-id-fs" /> Führerschein</label>
          <label><input type="checkbox" id="st-id-finger" /> Fingerabdruckscanner</label>
        </div>

        <label for="st-zeugen">Weitere beteiligte Einheiten/Zeugen</label>
        <textarea id="st-zeugen"></textarea>

        <label for="st-gegenstaende">Abgenommene Gegenstände</label>
        <textarea id="st-gegenstaende"></textarea>

        <div class="row">
          <div>
            <label for="st-abgenommen-von">Abgenommen von</label>
            <input id="st-abgenommen-von" type="text" />
          </div>
          <div>
            <label for="st-verlesen">Verlesen</label>
            <input id="st-verlesen" type="text" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="st-beisein">Beisein</label>
            <input id="st-beisein" type="text" />
          </div>
          <div>
            <label for="st-rechtsbeistand">Rechtsbeistand</label>
            <select id="st-rechtsbeistand">
              <option value="">– bitte wählen –</option>
              <option value="bestand">bestand</option>
              <option value="verzichtete">verzichtete</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="st-medizin">Medizinische Versorgung</label>
            <select id="st-medizin">
              <option value="">– bitte wählen –</option>
              <option value="bestand">bestand</option>
              <option value="verzichtete">verzichtete</option>
            </select>
          </div>
          <div>
            <label for="st-eilverfahren">Eilverfahren</label>
            <input id="st-eilverfahren" type="text" placeholder="z. B. abgelehnt durch …" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="st-bussgeld">Bußgelddatum</label>
            <input id="st-bussgeld" type="text" />
          </div>
          <div>
            <label for="st-gezeichnet">Gezeichnet von</label>
            <input id="st-gezeichnet" type="text" />
          </div>
        </div>

        <button class="btn" id="btn-strafakte">Strafakte generieren</button>
      </div>

      <!-- SCHNELLAKTE -->
      <div id="tab-schnellakte" class="hidden">
        <div class="row">
          <div>
            <label for="sc-officer">Officer</label>
            <input id="sc-officer" type="text" />
          </div>
          <div>
            <label for="sc-tatort">Tatort und Tatzeit</label>
            <input id="sc-tatort" type="text" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="sc-beschuldigte">Beschuldigte Personen</label>
            <textarea id="sc-beschuldigte"></textarea>
          </div>
          <div>
            <label for="sc-geschaedigte">Geschädigte Personen</label>
            <textarea id="sc-geschaedigte"></textarea>
          </div>
        </div>

        <label>Identitätsfeststellung</label>
        <div class="checkbox-row">
          <label><input type="checkbox" id="sc-id-pers" /> Personalausweis</label>
          <label><input type="checkbox" id="sc-id-waffe" /> Waffenschein</label>
          <label><input type="checkbox" id="sc-id-fs" /> Führerschein</label>
          <label><input type="checkbox" id="sc-id-finger" /> Fingerabdruckscanner</label>
        </div>

        <label for="sc-zeugen">Weitere beteiligte Einheiten/Zeugen</label>
        <textarea id="sc-zeugen"></textarea>

        <label for="sc-gegenstaende">Abgenommene Gegenstände</label>
        <textarea id="sc-gegenstaende"></textarea>

        <div class="row">
          <div>
            <label for="sc-abgenommen-von">Abgenommen von</label>
            <input id="sc-abgenommen-von" type="text" />
          </div>
          <div>
            <label for="sc-verlesen">Verlesen</label>
            <input id="sc-verlesen" type="text" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="sc-beisein">Beisein</label>
            <input id="sc-beisein" type="text" />
          </div>
          <div>
            <label for="sc-rechtsbeistand">Rechtsbeistand</label>
            <select id="sc-rechtsbeistand">
              <option value="">– bitte wählen –</option>
              <option value="bestand">bestand</option>
              <option value="verzichtete">verzichtete</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="sc-medizin">Medizinische Versorgung</label>
            <select id="sc-medizin">
              <option value="">– bitte wählen –</option>
              <option value="bestand">bestand</option>
              <option value="verzichtete">verzichtete</option>
            </select>
          </div>
          <div>
            <label for="sc-bussgeld">Bußgelddatum</label>
            <input id="sc-bussgeld" type="text" />
          </div>
        </div>

        <div>
          <label for="sc-gezeichnet">Gezeichnet von</label>
          <input id="sc-gezeichnet" type="text" />
        </div>

        <button class="btn" id="btn-schnellakte">Schnellakte generieren</button>
      </div>

      <!-- KOLLEKTIVAKTE -->
      <div id="tab-kollektivakte" class="hidden">
        <div class="row">
          <div>
            <label for="ko-officer">Officer</label>
            <input id="ko-officer" type="text" />
          </div>
          <div>
            <label for="ko-tatort">Tatort und Tatzeit</label>
            <input id="ko-tatort" type="text" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="ko-beschuldigte">Beschuldigte Personen</label>
            <textarea id="ko-beschuldigte"></textarea>
          </div>
          <div>
            <label for="ko-geschaedigte">Geschädigte Personen</label>
            <textarea id="ko-geschaedigte"></textarea>
          </div>
        </div>

        <label for="ko-sachverhalt">Sachverhalt aus Sicht des NCPDs</label>
        <textarea id="ko-sachverhalt"></textarea>

        <label>Identitätsfeststellung</label>
        <div class="checkbox-row">
          <label><input type="checkbox" id="ko-id-pers" /> Personalausweis</label>
          <label><input type="checkbox" id="ko-id-waffe" /> Waffenschein</label>
          <label><input type="checkbox" id="ko-id-fs" /> Führerschein</label>
          <label><input type="checkbox" id="ko-id-finger" /> Fingerabdruckscanner</label>
        </div>

        <label for="ko-zeugen">Weitere beteiligte Einheiten/Zeugen</label>
        <textarea id="ko-zeugen"></textarea>

        <label for="ko-gegenstaende">Abgenommene Gegenstände</label>
        <textarea id="ko-gegenstaende"></textarea>

        <div class="row">
          <div>
            <label for="ko-abgenommen-von">Abgenommen von</label>
            <input id="ko-abgenommen-von" type="text" />
          </div>
          <div>
            <label for="ko-verlesen">Verlesen</label>
            <input id="ko-verlesen" type="text" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="ko-beisein">Beisein</label>
            <input id="ko-beisein" type="text" />
          </div>
          <div>
            <label for="ko-rechtsbeistand">Rechtsbeistand</label>
            <select id="ko-rechtsbeistand">
              <option value="">– bitte wählen –</option>
              <option value="bestand">bestand</option>
              <option value="verzichtete">verzichtete</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="ko-medizin">Medizinische Versorgung</label>
            <select id="ko-medizin">
              <option value="">– bitte wählen –</option>
              <option value="bestand">bestand</option>
              <option value="verzichtete">verzichtete</option>
            </select>
          </div>
          <div>
            <label for="ko-bussgeld">Bußgelddatum</label>
            <input id="ko-bussgeld" type="text" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="ko-bestaetigt-von">Bestätigt von</label>
            <input id="ko-bestaetigt-von" type="text" />
          </div>
          <div>
            <label for="ko-bestaetigt-zeit">Bestätigt um (Uhrzeit)</label>
            <input id="ko-bestaetigt-zeit" type="text" />
          </div>
        </div>

        <div>
          <label for="ko-gezeichnet">Gezeichnet von</label>
          <input id="ko-gezeichnet" type="text" />
        </div>

        <button class="btn" id="btn-kollektivakte">Kollektivakte generieren</button>
      </div>
    </section>

    <section class="panel">
      <div class="panel-header">
        <div>
          <div class="panel-title">Generierte Akte</div>
          <div class="panel-subtitle">Text kann direkt kopiert werden</div>
        </div>
      </div>

      <textarea id="output" readonly></textarea>

      <div style="margin-top: 12px;">
        <button class="btn-secondary btn" id="btn-copy">In Zwischenablage kopieren</button>
      </div>
    </section>
  </main>

  <script>
const officerMap = {
  // ---------- TEAM RED ----------
  "361115973203525633": { name: "Lukas Lutz", dienstnummer: "PD-01", rang: "Chief of Police" },
  "929489098471796756": { name: "Alev Sunal", dienstnummer: "PD-02", rang: "Assistant Chief of Police" },
  "689193377261944853": { name: "Pau Sunal", dienstnummer: "PD-03", rang: "Deputy Chief" },
  "749676361274359869": { name: "Peter Klumb", dienstnummer: "PD-04", rang: "Deputy Chief" },
  "281504730067369985": { name: "Steve McGarret", dienstnummer: "PD-05", rang: "Bureau Chief" },

  // ---------- TEAM BLUE ----------
  "721476043814207830": { name: "Tayo Backa", dienstnummer: "PD-09", rang: "Watch Commander" },
  "663782248998502447": { name: "Walter Waldmeister", dienstnummer: "PD-16", rang: "Inspector" },
  "340137585240440833": { name: "Morata Soler", dienstnummer: "PD-17", rang: "Inspector" },
  "366609124038934528": { name: "Ben Morisson", dienstnummer: "PD-18", rang: "Inspector" },
  "708062101457076228": { name: "Vito Ramirez", dienstnummer: "PD-19", rang: "Deputy Inspector" },

  // ---------- TEAM GOLD ----------
  "750431732607483905": { name: "Jule Waldmeister", dienstnummer: "PD-21", rang: "Master Lieutenant" },
  "1142017198718730271": { name: "Blaze Redman", dienstnummer: "PD-22", rang: "Master Lieutenant" },
  "228380461628391424": { name: "Zane Blackwood", dienstnummer: "PD-24", rang: "Lieutenant III" },
  "378598475971166208": { name: "Toni Deluca", dienstnummer: "PD-26", rang: "Lieutenant III" },
  "1134903991818534942": { name: "Daniel Waldmeister", dienstnummer: "PD-29", rang: "Lieutenant II" },
  "723312724519551006": { name: "Andreas Hackl", dienstnummer: "PD-34", rang: "Lieutenant I" },
  "697119782834536520": { name: "Anton Horvath", dienstnummer: "PD-35", rang: "Lieutenant I" },
  "1379206122233139223": { name: "Andreas Hackl", dienstnummer: "PD-36", rang: "Lieutenant I" },

  // ---------- TEAM SILVER ----------
  "247006489632440322": { name: "Felix Miller", dienstnummer: "PD-40", rang: "Specialist" },
  "587348686326202369": { name: "Andreas Graham", dienstnummer: "PD-41", rang: "Staff Sergeant" },
  "1008577835503452211": { name: "Luke Dijk", dienstnummer: "PD-42", rang: "Specialist" },
  "498101850856226839": { name: "Reiner Hirsch", dienstnummer: "PD-43", rang: "Staff Sergeant" },
  "543002544348200960": { name: "Jackson Dayne", dienstnummer: "PD-44", rang: "Specialist" },
  "717473357909590099": { name: "Max Koslowski", dienstnummer: "PD-45", rang: "Specialist" },
  "693183499657543780": { name: "Ottmar Zittlau", dienstnummer: "PD-46", rang: "Sergeant III" },
  "513456111160918027": { name: "Ian Miller", dienstnummer: "PD-47", rang: "Sergeant III" },
  "1217116992616661033": { name: "Panther Nova", dienstnummer: "PD-48", rang: "Staff Sergeant" },
  "886307752706719825": { name: "Max Lockheed", dienstnummer: "PD-49", rang: "Specialist" },
  "764520163633922060": { name: "Alejandro Rodriguez", dienstnummer: "PD-50", rang: "Specialist" },
  "564390978547351553": { name: "Antonio Moretti", dienstnummer: "PD-51", rang: "Specialist" },
  "550392010612146207": { name: "Keystone Brown", dienstnummer: "PD-53", rang: "Specialist" },
  "711866485651275787": { name: "David Baum", dienstnummer: "PD-54", rang: "Sergeant I" },
  "450016531229966336": { name: "Jason Shaw", dienstnummer: "PD-56", rang: "Specialist" },
  "541633624051679262": { name: "Harald Hernandez", dienstnummer: "PD-57", rang: "Sergeant III" },
  "1093573634213285989": { name: "Lucius Lich", dienstnummer: "PD-58", rang: "Sergeant II" },
  "931064598570893343": { name: "Joey Reed", dienstnummer: "PD-59", rang: "Specialist" },
  "808712195390701618": { name: "Ali Coban", dienstnummer: "PD-61", rang: "Staff Sergeant" },
  "1261019609818075207": { name: "Elina Thompson", dienstnummer: "PD-62", rang: "Sergeant II" },
  "437314188059344898": { name: "Enrique Vegas", dienstnummer: "PD-63", rang: "Sergeant I" },
  "788866575305408544": { name: "Alvaro Reinh", dienstnummer: "PD-64", rang: "Sergeant III" },
  "878966028347015198": { name: "Peter Maier", dienstnummer: "PD-66", rang: "Specialist" },
  "1283519810570944543": { name: "Sultan Can", dienstnummer: "PD-67", rang: "Staff Sergeant" },
  "811317056245989397": { name: "Dario Ramirez", dienstnummer: "PD-68", rang: "Specialist" },
  "1315048772408971415": { name: "Diego Santos", dienstnummer: "PD-70", rang: "Staff Sergeant" },
  "808103110316785725": { name: "Nosa Holy", dienstnummer: "PD-71", rang: "Sergeant II" },
  "481793329328291840": { name: "Lamar Kasim", dienstnummer: "PD-72", rang: "Specialist" },
  "1357827587950252153": { name: "Efe Voga", dienstnummer: "PD-73", rang: "Specialist" },
  "579359902800281611": { name: "Beton Tapi", dienstnummer: "PD-74", rang: "Specialist" },
  "831635399679017002": { name: "Tom Black", dienstnummer: "PD-77", rang: "Sergeant II" },
  "966081394310783006": { name: "Michael Korczak", dienstnummer: "PD-78", rang: "Specialist" },

  // ---------- TEAM GREEN ----------
  "877241505016844328": { name: "Salva Sol", dienstnummer: "PA-52", rang: "Anwärter" },
  "677541121383202817": { name: "Ben Stein", dienstnummer: "PA-53", rang: "Anwärter" },
  "624039199028543499": { name: "Ludovico Greco", dienstnummer: "PA-56", rang: "Anwärter" },
  "935269358098321418": { name: "Nico Bublich", dienstnummer: "PA-57", rang: "Anwärter" },
  "508666139333623808": { name: "Mehmet Aklubat", dienstnummer: "PA-61", rang: "Anwärter" },
  "1069361772324200478": { name: "Roman Schlag", dienstnummer: "PA-61", rang: "Anwärter" },
  "764520163633922060": { name: "Alejandro Rodriguez", dienstnummer: "PA-54", rang: "Anwärter" },
  "161210739174932481": { name: "Eduardo Sanchez", dienstnummer: "PA-66", rang: "Anwärter" },
  "730909080649990204": { name: "Max Aklubat", dienstnummer: "PA-69", rang: "Anwärter" },
  "966711299419537468": { name: "Lukas Denzel", dienstnummer: "PA-71", rang: "Anwärter" },
  "1215412476359737366": { name: "Lukas Rothe", dienstnummer: "PA-72", rang: "Anwärter" },
  "925887471198306374": { name: "Noah Schlotter", dienstnummer: "PA-73", rang: "Anwärter" },
  "526132485101191203": { name: "Max Brechtelsbauer", dienstnummer: "PA-76", rang: "Anwärter" },
  "508377615241969674": { name: "Abusa Hanco", dienstnummer: "PA-78", rang: "Anwärter" },
  "530031383007985665": { name: "Michael Johnson", dienstnummer: "PA-79", rang: "Anwärter" }
};

function getDiscordAccessToken() {
  const hash = window.location.hash.substring(1);
  if (!hash) return null;

  const params = new URLSearchParams(hash);
  const token = params.get("access_token");

  if (token) {
    history.replaceState(null, "", window.location.pathname + window.location.search);
  }

  return token;
}

function fillOfficerFromDiscord(discordId) {
  const o = officerMap[discordId];
  if (!o) return;

  const full = `${o.name} | ${o.dienstnummer} | ${o.rang}`;

  const [vorname, nachname] = o.name.split(" ");
  const kuerzel = `${vorname.charAt(0)}. ${nachname}`;

  const unterschrift = `${kuerzel}\n${o.name} | ${o.dienstnummer} | ${o.rang}`;

  ["st-officer","sc-officer","ko-officer"].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.value = full;
  });

  ["st-gezeichnet","sc-gezeichnet","ko-gezeichnet"].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.value = unterschrift;
  });
}
 
async function initDiscordUser() {
  const token = getDiscordAccessToken();
  if (!token) return;

  try {
    const res = await fetch("https://discord.com/api/users/@me", {
      headers: {
        Authorization: `Bearer ${token}`
      }
    });

    if (!res.ok) {
      console.error("Discord API Fehler", res.status);
      return;
    }

    const user = await res.json();
    console.log("Discord User:", user);

    fillOfficerFromDiscord(user.id);
  } catch (err) {
    console.error("Discord Request fehlgeschlagen:", err);
  }
}
    
document.querySelectorAll(".tab-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    const tab = btn.dataset.tab;
    document.querySelectorAll("#tab-strafakte, #tab-schnellakte, #tab-kollektivakte")
      .forEach(el => el.classList.add("hidden"));
    document.getElementById("tab-" + tab).classList.remove("hidden");
  });
});

function getIdentitaet(prefix) {
  const parts = [];
  if (document.getElementById(prefix + "-id-pers")?.checked)   parts.push("Personalausweis");
  if (document.getElementById(prefix + "-id-waffe")?.checked)  parts.push("Waffenschein");
  if (document.getElementById(prefix + "-id-fs")?.checked)     parts.push("Führerschein");
  if (document.getElementById(prefix + "-id-finger")?.checked) parts.push("Fingerabdruckscanner");
  if (!parts.length) return "Keine Identitätsfeststellung vermerkt.";
  return "Die Identität wurde mittels " + parts.join(", ") + " festgestellt.";
}

function genStrafakte() {
  const officer = document.getElementById("st-officer").value.trim();
  const tatort = document.getElementById("st-tatort").value.trim();
  const besch = document.getElementById("st-beschuldigte").value.trim();
  const ges = document.getElementById("st-geschaedigte").value.trim();
  const sach = document.getElementById("st-sachverhalt").value.trim();
  const idTxt = getIdentitaet("st");
  const zeugen = document.getElementById("st-zeugen").value.trim();
  const geg = document.getElementById("st-gegenstaende").value.trim();
  const abn = document.getElementById("st-abgenommen-von").value.trim();
  const verlesen = document.getElementById("st-verlesen").value.trim();
  const beisein = document.getElementById("st-beisein").value.trim();
  const rb = document.getElementById("st-rechtsbeistand").value;
  const med = document.getElementById("st-medizin").value;
  const eil = document.getElementById("st-eilverfahren").value.trim();
  const buss = document.getElementById("st-bussgeld").value.trim();
  const gezeichnet = document.getElementById("st-gezeichnet").value.trim();

  let out = "";

  out += "| - Strafakte - |\n\n";
  out += "Narco City Police Department\n";
  out += officer + "\n\n";

  out += "| Tatort und Zeitraum: |\n";
  out += tatort + "\n\n";

  out += "| Beschuldigte Person(en): |\n";
  out += besch + "\n\n";

  out += "| Geschädigte Person(en): |\n";
  out += ges + "\n\n";

  out += "| Sachverhalt aus Sicht des NCPDs: |\n";
  out += sach + "\n\n";
  out += idTxt + "\n\n";

  out += "| Weitere beteiligte Einheiten/Zeugen: |\n";
  out += zeugen + "\n\n";

  out += "| Abgenommene Gegenstände: |  Abgenommen von: " + abn + "\n";
  out += geg + "\n\n";

  out += "| Bemerkungen: |\n";
  out += "Die Rechte wurden dem Beschuldigten durch " + verlesen + " im Beisein von " + beisein + " verlesen und verstanden.\n";

  if (rb === "bestand") out += "Dieser bestand auf einen Rechtsbeistand.\n";
  if (rb === "verzichtete") out += "Dieser verzichtete auf einen Rechtsbeistand.\n";

  if (med === "bestand") out += "Der TV bestand auf medizinische Versorgung.\n";
  if (med === "verzichtete") out += "Der TV verzichtete auf medizinische Versorgung.\n";

  out += "Das Bußgeld ist bis zum " + buss + " [+7 Tage] zu bezahlen.\n";
  out += "Die dem Tatverdächtigen abgenommenen Gegenstände wurden in seinen persönlichen Spind gelegt.\n";

  if (eil !== "") out += "Das Eilverfahren wurde durch " + eil + " abgelehnt.\n";

  out += "\n| Gezeichnet von: |\n";
  out += gezeichnet + "\n\n";

  document.getElementById("output").value = out;
}

function genSchnellakte() {
  const officer = document.getElementById("sc-officer").value.trim();
  const tatort = document.getElementById("sc-tatort").value.trim();
  const besch = document.getElementById("sc-beschuldigte").value.trim();
  const ges = document.getElementById("sc-geschaedigte").value.trim();
  const idTxt = getIdentitaet("sc");
  const zeugen = document.getElementById("sc-zeugen").value.trim();
  const geg = document.getElementById("sc-gegenstaende").value.trim();
  const abn = document.getElementById("sc-abgenommen-von").value.trim();
  const verlesen = document.getElementById("sc-verlesen").value.trim();
  const beisein = document.getElementById("sc-beisein").value.trim();
  const rb = document.getElementById("sc-rechtsbeistand").value;
  const med = document.getElementById("sc-medizin").value;
  const buss = document.getElementById("sc-bussgeld").value.trim();
  const gezeichnet = document.getElementById("sc-gezeichnet").value.trim();

  let out = "";

  out += "| - Schnellakte - |\n\n";
  out += "Narco City Police Department\n";
  out += officer + "\n\n";

  out += "| Tatort und Zeitraum: |\n";
  out += tatort + "\n\n";

  out += "| Beschuldigte Person(en): |\n";
  out += besch + "\n\n";

  out += "| Geschädigte Person(en): |\n";
  out += ges + "\n\n";

  out += "| Weitere beteiligte Einheiten/Zeugen: |\n";
  out += zeugen + "\n\n";

  out += "| Abgenommene Gegenstände: |  Abgenommen von: " + abn + "\n";
  out += geg + "\n\n";

  out += "| Bemerkungen: |\n";
  out += "Die Rechte wurden dem Beschuldigten durch " + verlesen + " im Beisein von " + beisein + " verlesen und verstanden.\n";

  if (rb === "bestand") out += "Dieser bestand auf einen Rechtsbeistand.\n";
  if (rb === "verzichtete") out += "Dieser verzichtete auf einen Rechtsbeistand.\n";

  if (med === "bestand") out += "Der TV bestand auf medizinische Versorgung.\n";
  if (med === "verzichtete") out += "Der TV verzichtete auf medizinische Versorgung.\n";

  out += "Das Bußgeld ist bis zum " + buss + " [+7 Tage] zu bezahlen.\n";
  out += "Die dem Tatverdächtigen abgenommenen Gegenstände wurden in seinen persönlichen Spind gelegt.\n\n";

  out += "| Gezeichnet von: |\n";
  out += gezeichnet + "\n\n";

  document.getElementById("output").value = out;
}

function genKollektivakte() {
  const officer = document.getElementById("ko-officer").value.trim();
  const tatort = document.getElementById("ko-tatort").value.trim();
  const besch = document.getElementById("ko-beschuldigte").value.trim();
  const ges = document.getElementById("ko-geschaedigte").value.trim();
  const sach = document.getElementById("ko-sachverhalt").value.trim();
  const idTxt = getIdentitaet("ko");
  const zeugen = document.getElementById("ko-zeugen").value.trim();
  const geg = document.getElementById("ko-gegenstaende").value.trim();
  const abn = document.getElementById("ko-abgenommen-von").value.trim();
  const verlesen = document.getElementById("ko-verlesen").value.trim();
  const beisein = document.getElementById("ko-beisein").value.trim();
  const rb = document.getElementById("ko-rechtsbeistand").value;
  const med = document.getElementById("ko-medizin").value;
  const buss = document.getElementById("ko-bussgeld").value.trim();
  const bestaetigtVon = document.getElementById("ko-bestaetigt-von").value.trim();
  const bestaetigtZeit = document.getElementById("ko-bestaetigt-zeit").value.trim();
  const gezeichnet = document.getElementById("ko-gezeichnet").value.trim();

  let out = "";

  out += "| - Kollektivakte - |\n";
  out += "Narco City Police Department\n";
  out += officer + "\n";
  out += "Kollektivakte wurde von " + bestaetigtVon + " um " + bestaetigtZeit + " genehmigt\n\n";

  out += "| Tatort und Zeitraum: |\n";
  out += tatort + "\n\n";

  out += "| Beschuldigte Personen: |\n";
  out += besch + "\n\n";

  out += "| Geschädigte Person(en): |\n";
  out += ges + "\n\n";

  out += "| Sachverhalt aus Sicht des NCPDs: |\n";
  out += sach + "\n\n";
  out += idTxt + "\n\n";

  out += "| Weitere beteiligte Einheiten/Zeugen: |\n";
  out += zeugen + "\n\n";

  out += "| Abgenommene Gegenstände: |  Abgenommen von: " + abn + "\n";
  out += geg + "\n\n";

  out += "| Bemerkungen: |\n";
  out += "Die Rechte wurden dem Beschuldigten durch " + verlesen + " im Beisein von " + beisein + " verlesen und verstanden.\n";

  if (rb === "bestand") out += "Diese bestand auf einen Rechtsbeistand.\n";
  if (rb === "verzichtete") out += "Diese verzichtete auf einen Rechtsbeistand.\n";

  if (med === "bestand") out += "Die TV´s bestanden auf medizinische Versorgung.\n";
  if (med === "verzichtete") out += "Die TV´s verzichteten auf medizinische Versorgung.\n";

  out += "Das Bußgeld ist bis zum " + buss + " zu bezahlen. (+ 7 Tage)\n\n";

  out += "| Gezeichnet von: |\n";
  out += gezeichnet + "\n\n";

  document.getElementById("output").value = out;
}

document.getElementById("btn-strafakte").addEventListener("click", genStrafakte);
document.getElementById("btn-schnellakte").addEventListener("click", genSchnellakte);
document.getElementById("btn-kollektivakte").addEventListener("click", genKollektivakte);

document.getElementById("btn-copy").addEventListener("click", () => {
  const out = document.getElementById("output");
  out.select();
  out.setSelectionRange(0, 99999);
  try {
    document.execCommand("copy");
  } catch (e) {}
});

// Discord-User initialisieren
initDiscordUser();
  </script>
</body>
</html>
