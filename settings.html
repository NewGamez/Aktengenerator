<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>NCPD Einstellungen</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
body{
  background:radial-gradient(circle at top,#252542 0,#050511 55%,#050509 100%);
  color:#fff;font-family:Inter;padding:20px
}
button{padding:8px 14px;border-radius:8px;border:none;background:#5865f2;color:#fff;cursor:pointer}
input,select{padding:6px;border-radius:6px;width:100%}
table{width:100%;border-collapse:collapse}
td,th{padding:8px;border-bottom:1px solid #333}
</style>
</head>
<body>

<script>
if (sessionStorage.getItem("ncpd_admin_logged_in") !== "true") {
  window.location.href = "index.html";
}
</script>

<h2>NCPD Mitarbeiterverwaltung</h2>
<p>Nur mit Passwort erreichbar</p>

<button onclick="add()">+ Mitarbeiter</button>
<button onclick="save()">Speichern</button>
<button onclick="location.href='generator.html'">Zum Generator</button>

<table>
<thead>
<tr>
<th>Name</th><th>Rang</th><th>Dienstnr</th><th>Discord ID</th><th>Aktion</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>

<script>
const STORAGE="ncpd_officerMap_v1";
const RANKS=[
"President of Police","Chief of Police","Assistant Chief of Police","Deputy Chief","Bureau Chief",
"Commander","Watch Commander","Captain","Inspector","Deputy Inspector",
"Master Lieutenant","Lieutenant III","Lieutenant II","Lieutenant I",
"Staff Sergeant","Sergeant III","Sergeant II","Sergeant I","Specialist","Anwärter"
];

let data=JSON.parse(localStorage.getItem(STORAGE)||"{}");

function render(){
 list.innerHTML="";
 Object.entries(data).forEach(([id,o])=>{
  list.innerHTML+=`
<tr>
<td><input value="${o.name}" onchange="data['${id}'].name=this.value"></td>
<td><select onchange="data['${id}'].rang=this.value">${RANKS.map(r=>`<option ${r==o.rang?"selected":""}>${r}</option>`).join("")}</select></td>
<td><input value="${o.dienstnummer}" onchange="data['${id}'].dienstnummer=this.value"></td>
<td>${id}</td>
<td><button onclick="del('${id}')">Kündigen</button></td>
</tr>`;
 });
}

function add(){
 const id=prompt("Discord ID");
 if(!id)return;
 data[id]={name:"Neu",dienstnummer:"",rang:"Anwärter"};
 render();
}
function del(id){delete data[id];render();}
function save(){
 localStorage.setItem(STORAGE,JSON.stringify(data));
 alert("Gespeichert");
}
render();
</script>

</body>
</html>
